pkgname=android-liblog
pkgver=7.0.0_r34
pkgrel=0
pkgdesc="Android low-level logging library"
url="https://github.com/android/platform_system_core"
arch="all"
license="APACHE2"
depends=""
makedepends="bsd-compat-headers"
options="!check"
source="
	android_platform_system_core-$pkgver.tar.gz::https://github.com/android/platform_system_core/archive/android-${pkgver}.tar.gz
	liblog.mk"
_lib="log"
subpackages="$pkgname-dev"
builddir="$srcdir"/platform_system_core-android-$pkgver

prepare() {
	cp "$srcdir"/liblog.mk "$builddir"
}

build() {
	cd "$builddir"
	make -f liblog.mk
}

package() {
	# Library
	_libs="lib${_lib}.so lib${_lib}.so.0"
	for _l in $_libs; do
		install -Dm644 "${builddir}/$_l" \
			"${pkgdir}/usr/lib/android/$_l"
	done

	# Header files
	mkdir -p "${pkgdir}/usr/include/android/"
	cp -r "${srcdir}/platform_system_core-android-${pkgver}/include/${_lib}" \
		"${pkgdir}/usr/include/android/"
	cp -r "${srcdir}/platform_system_core-android-${pkgver}/include/android" \
		"${pkgdir}/usr/include/android/"
}

sha512sums="f84d31db61f86c73b8aecbaf788d43b0a2cc984121fd7244a2f7ca2a2a751437b8708acdd27cb86a260162e866c40f6015f14d52beb3a85e9ae2efd6f44b73f3  android_platform_system_core-7.0.0_r34.tar.gz
f0a8b10750558bb0c0210d952fa2bca9603d86354911e674e3338047c5bc7dc3fd256a2d077ec3b1bb7bed0af25e72fd3a6943d6f57a8c4feab37ebe6b8878c8  liblog.mk"
