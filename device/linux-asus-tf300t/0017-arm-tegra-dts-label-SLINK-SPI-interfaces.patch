From 2c437c41f822066bca9beaa85fb75c1300165989 Mon Sep 17 00:00:00 2001
Message-Id: <2c437c41f822066bca9beaa85fb75c1300165989.1516189772.git.mirq-linux@rere.qmqm.pl>
In-Reply-To: <ca5e9bd6560a188703123bcef6012ce2efa71aaf.1516189772.git.mirq-linux@rere.qmqm.pl>
References: <ca5e9bd6560a188703123bcef6012ce2efa71aaf.1516189772.git.mirq-linux@rere.qmqm.pl>
From: =?UTF-8?q?Micha=C5=82=20Miros=C5=82aw?= <mirq-linux@rere.qmqm.pl>
Date: Fri, 21 Jul 2017 02:56:23 +0200
Subject: [PATCH 17/52] arm: tegra: dts: label SLINK (SPI) interfaces
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Michał Mirosław <mirq-linux@rere.qmqm.pl>
---
 arch/arm/boot/dts/tegra30-apalis-eval.dts     | 45 ++++++++++----------
 arch/arm/boot/dts/tegra30-apalis.dtsi         | 60 +++++++++++++--------------
 arch/arm/boot/dts/tegra30-beaver.dts          | 21 +++++-----
 arch/arm/boot/dts/tegra30-cardhu.dtsi         | 21 +++++-----
 arch/arm/boot/dts/tegra30-colibri-eval-v3.dts | 40 +++++++++---------
 arch/arm/boot/dts/tegra30.dtsi                | 12 +++---
 6 files changed, 102 insertions(+), 97 deletions(-)

diff --git a/arch/arm/boot/dts/tegra30-apalis-eval.dts b/arch/arm/boot/dts/tegra30-apalis-eval.dts
index 23a21990f4de..94b69264944e 100644
--- a/arch/arm/boot/dts/tegra30-apalis-eval.dts
+++ b/arch/arm/boot/dts/tegra30-apalis-eval.dts
@@ -72,28 +72,6 @@
 		status = "okay";
 	};
 
-	/* SPI1: Apalis SPI1 */
-	spi@7000d400 {
-		status = "okay";
-		spi-max-frequency = <25000000>;
-		spidev0: spidev@1 {
-			compatible = "spidev";
-			reg = <1>;
-			spi-max-frequency = <25000000>;
-		};
-	};
-
-	/* SPI5: Apalis SPI2 */
-	spi@7000dc00 {
-		status = "okay";
-		spi-max-frequency = <25000000>;
-		spidev1: spidev@2 {
-			compatible = "spidev";
-			reg = <2>;
-			spi-max-frequency = <25000000>;
-		};
-	};
-
 	hda@70030000 {
 		status = "okay";
 	};
@@ -225,6 +203,29 @@ hdmiddc: &i2c4 {
 	status = "okay";
 };
 
+
+/* SPI1: Apalis SPI1 */
+&slink1 {
+	status = "okay";
+	spi-max-frequency = <25000000>;
+	spidev0: spidev@1 {
+		compatible = "spidev";
+		reg = <1>;
+		spi-max-frequency = <25000000>;
+	};
+};
+
+/* SPI5: Apalis SPI2 */
+&slink5 {
+	status = "okay";
+	spi-max-frequency = <25000000>;
+	spidev1: spidev@2 {
+		compatible = "spidev";
+		reg = <2>;
+		spi-max-frequency = <25000000>;
+	};
+};
+
 sd1: &sdmmc1 {
 	status = "okay";
 	bus-width = <4>;
diff --git a/arch/arm/boot/dts/tegra30-apalis.dtsi b/arch/arm/boot/dts/tegra30-apalis.dtsi
index 056575433c5e..58fbc48d2242 100644
--- a/arch/arm/boot/dts/tegra30-apalis.dtsi
+++ b/arch/arm/boot/dts/tegra30-apalis.dtsi
@@ -435,36 +435,6 @@
 		};
 	};
 
-	/* SPI4: CAN2 */
-	spi@7000da00 {
-		status = "okay";
-		spi-max-frequency = <10000000>;
-
-		can@1 {
-			compatible = "microchip,mcp2515";
-			reg = <1>;
-			clocks = <&clk16m>;
-			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(W, 3) GPIO_ACTIVE_LOW>;
-			spi-max-frequency = <10000000>;
-		};
-	};
-
-	/* SPI6: CAN1 */
-	spi@7000de00 {
-		status = "okay";
-		spi-max-frequency = <10000000>;
-
-		can@0 {
-			compatible = "microchip,mcp2515";
-			reg = <0>;
-			clocks = <&clk16m>;
-			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(W, 2) GPIO_ACTIVE_LOW>;
-			spi-max-frequency = <10000000>;
-		};
-	};
-
 	pmc@7000e400 {
 		nvidia,invert-interrupt;
 		nvidia,suspend-mode = <1>;
@@ -777,6 +747,36 @@ hdmiddc: &i2c4 {
 	};
 };
 
+/* SPI4: CAN2 */
+&slink4 {
+	status = "okay";
+	spi-max-frequency = <10000000>;
+
+	can@1 {
+		compatible = "microchip,mcp2515";
+		reg = <1>;
+		clocks = <&clk16m>;
+		interrupt-parent = <&gpio>;
+		interrupts = <TEGRA_GPIO(W, 3) GPIO_ACTIVE_LOW>;
+		spi-max-frequency = <10000000>;
+	};
+};
+
+/* SPI6: CAN1 */
+&slink6 {
+	status = "okay";
+	spi-max-frequency = <10000000>;
+
+	can@0 {
+		compatible = "microchip,mcp2515";
+		reg = <0>;
+		clocks = <&clk16m>;
+		interrupt-parent = <&gpio>;
+		interrupts = <TEGRA_GPIO(W, 2) GPIO_ACTIVE_LOW>;
+		spi-max-frequency = <10000000>;
+	};
+};
+
 /* eMMC */
 &sdmmc4 {
 	status = "okay";
diff --git a/arch/arm/boot/dts/tegra30-beaver.dts b/arch/arm/boot/dts/tegra30-beaver.dts
index 8fe5be6b4a71..ccc120fa31f7 100644
--- a/arch/arm/boot/dts/tegra30-beaver.dts
+++ b/arch/arm/boot/dts/tegra30-beaver.dts
@@ -1733,16 +1733,6 @@
 		status = "okay";
 	};
 
-	spi@7000da00 {
-		status = "okay";
-		spi-max-frequency = <25000000>;
-		spi-flash@1 {
-			compatible = "winbond,w25q32";
-			reg = <1>;
-			spi-max-frequency = <20000000>;
-		};
-	};
-
 	pmc@7000e400 {
 		status = "okay";
 		nvidia,invert-interrupt;
@@ -2075,6 +2065,17 @@ hdmiddc: &i2c4 {
 	};
 };
 
+&slink4 {
+	status = "okay";
+	spi-max-frequency = <25000000>;
+
+	spi-flash@1 {
+		compatible = "winbond,w25q32";
+		reg = <1>;
+		spi-max-frequency = <20000000>;
+	};
+};
+
 &sdmmc1 {
 	status = "okay";
 	vqmmc-supply = <&ldo5_reg>;
diff --git a/arch/arm/boot/dts/tegra30-cardhu.dtsi b/arch/arm/boot/dts/tegra30-cardhu.dtsi
index d80eef57f46a..7a8e5efd3cff 100644
--- a/arch/arm/boot/dts/tegra30-cardhu.dtsi
+++ b/arch/arm/boot/dts/tegra30-cardhu.dtsi
@@ -178,16 +178,6 @@
 		status = "okay";
 	};
 
-	spi@7000da00 {
-		status = "okay";
-		spi-max-frequency = <25000000>;
-		spi-flash@1 {
-			compatible = "winbond,w25q32";
-			reg = <1>;
-			spi-max-frequency = <20000000>;
-		};
-	};
-
 	pmc@7000e400 {
 		status = "okay";
 		nvidia,invert-interrupt;
@@ -626,6 +616,17 @@ panelddc: &i2c1 {
 	};
 };
 
+&slink4 {
+	status = "okay";
+	spi-max-frequency = <25000000>;
+
+	spi-flash@1 {
+		compatible = "winbond,w25q32";
+		reg = <1>;
+		spi-max-frequency = <20000000>;
+	};
+};
+
 &sdmmc1 {
 	status = "okay";
 	cd-gpios = <&gpio TEGRA_GPIO(I, 5) GPIO_ACTIVE_LOW>;
diff --git a/arch/arm/boot/dts/tegra30-colibri-eval-v3.dts b/arch/arm/boot/dts/tegra30-colibri-eval-v3.dts
index 2ece79bb9e77..a70521120d06 100644
--- a/arch/arm/boot/dts/tegra30-colibri-eval-v3.dts
+++ b/arch/arm/boot/dts/tegra30-colibri-eval-v3.dts
@@ -49,25 +49,6 @@
 		status = "okay";
 	};
 
-	/* SPI1: Colibri SSP */
-	spi@7000d400 {
-		status = "okay";
-		spi-max-frequency = <25000000>;
-		can0: can@0 {
-			compatible = "microchip,mcp2515";
-			reg = <0>;
-			clocks = <&clk16m>;
-			interrupt-parent = <&gpio>;
-			interrupts = <TEGRA_GPIO(S, 0) GPIO_ACTIVE_LOW>;
-			spi-max-frequency = <10000000>;
-		};
-		spidev0: spi@1 {
-			compatible = "spidev";
-			reg = <1>;
-			spi-max-frequency = <25000000>;
-		};
-	};
-
 	backlight: backlight {
 		compatible = "pwm-backlight";
 
@@ -183,6 +164,27 @@
 	status = "okay";
 };
 
+/* SPI1: Colibri SSP */
+&slink1 {
+	status = "okay";
+	spi-max-frequency = <25000000>;
+
+	can0: can@0 {
+		compatible = "microchip,mcp2515";
+		reg = <0>;
+		clocks = <&clk16m>;
+		interrupt-parent = <&gpio>;
+		interrupts = <TEGRA_GPIO(S, 0) GPIO_ACTIVE_LOW>;
+		spi-max-frequency = <10000000>;
+	};
+
+	spidev0: spi@1 {
+		compatible = "spidev";
+		reg = <1>;
+		spi-max-frequency = <25000000>;
+	};
+};
+
 /* SD/MMC */
 &sdmmc2 {
 	status = "okay";
diff --git a/arch/arm/boot/dts/tegra30.dtsi b/arch/arm/boot/dts/tegra30.dtsi
index 58f195fc642c..054bf8a36fc8 100644
--- a/arch/arm/boot/dts/tegra30.dtsi
+++ b/arch/arm/boot/dts/tegra30.dtsi
@@ -552,7 +552,7 @@
 		status = "disabled";
 	};
 
-	spi@7000d400 {
+	slink1: spi@7000d400 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000d400 0x200>;
 		interrupts = <GIC_SPI 59 IRQ_TYPE_LEVEL_HIGH>;
@@ -566,7 +566,7 @@
 		status = "disabled";
 	};
 
-	spi@7000d600 {
+	slink2: spi@7000d600 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000d600 0x200>;
 		interrupts = <GIC_SPI 82 IRQ_TYPE_LEVEL_HIGH>;
@@ -580,7 +580,7 @@
 		status = "disabled";
 	};
 
-	spi@7000d800 {
+	slink3: spi@7000d800 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000d800 0x200>;
 		interrupts = <GIC_SPI 83 IRQ_TYPE_LEVEL_HIGH>;
@@ -594,7 +594,7 @@
 		status = "disabled";
 	};
 
-	spi@7000da00 {
+	slink4: spi@7000da00 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000da00 0x200>;
 		interrupts = <GIC_SPI 93 IRQ_TYPE_LEVEL_HIGH>;
@@ -608,7 +608,7 @@
 		status = "disabled";
 	};
 
-	spi@7000dc00 {
+	slink5: spi@7000dc00 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000dc00 0x200>;
 		interrupts = <GIC_SPI 94 IRQ_TYPE_LEVEL_HIGH>;
@@ -622,7 +622,7 @@
 		status = "disabled";
 	};
 
-	spi@7000de00 {
+	slink6: spi@7000de00 {
 		compatible = "nvidia,tegra30-slink", "nvidia,tegra20-slink";
 		reg = <0x7000de00 0x200>;
 		interrupts = <GIC_SPI 79 IRQ_TYPE_LEVEL_HIGH>;
-- 
2.14.2

