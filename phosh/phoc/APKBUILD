# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=phoc
pkgver=0_git20190711
pkgrel=0
_commit="b963ac6d86cbde804e3fe87d0b9d747d37e03d8d"
pkgdesc="wlroots based Phone compositor for the Phosh shell"
arch="x86 x86_64"
url="https://source.puri.sm/Librem5/phoc"
license="GPL-3.0-only"
depends=""
makedepends="meson ninja gobject-introspection-dev libinput-dev wayland-dev wayland-protocols libxkbcommon-dev wlroots-dev wlroots"
subpackages="$pkgname-doc $pkgname-lang"
source="$pkgname-$_commit.tar.gz::https://source.puri.sm/Librem5/$pkgname/-/archive/$_commit.tar.gz"
builddir="$srcdir/$pkgname-$_commit"

build() {
	meson . _build --prefix=/usr
	ninja -C _build
}

check() {
	ninja -C _build test
}

package() {
	DESTDIR="$pkgdir/" ninja -C _build install
}
sha512sums="055727ac7e3c9ad5a8a10b4987701e1e669b538179f106e2d80fee44c22882ec6152860d8a43f8d0794e6c7dd30eea58ce746631ed81e99607c789a5453f5f15  phoc-b963ac6d86cbde804e3fe87d0b9d747d37e03d8d.tar.gz"
