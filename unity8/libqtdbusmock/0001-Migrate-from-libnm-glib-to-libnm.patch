From a3ffef0d8b639651c1d2c5099830a81325d26b6c Mon Sep 17 00:00:00 2001
From: Luca Weiss <luca@z3ntu.xyz>
Date: Thu, 11 Apr 2019 10:51:39 +0200
Subject: [PATCH] Migrate from libnm-glib to libnm

libnm-glib is deprecated, not built by all distros anymore and will soon
be removed completely from NetworkManager
---
 CMakeLists.txt                       | 2 +-
 src/libqtdbusmock/DBusMock.cpp       | 2 +-
 tests/libqtdbusmock/TestDBusMock.cpp | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index ab42304..c30aaa5 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -22,7 +22,7 @@ include_directories(${Qt5Test_INCLUDE_DIRS})
 pkg_check_modules(QTDBUSTEST REQUIRED libqtdbustest-1 REQUIRED)
 include_directories(${QTDBUSTEST_INCLUDE_DIRS})
 
-pkg_check_modules(NM REQUIRED NetworkManager REQUIRED)
+pkg_check_modules(NM REQUIRED libnm REQUIRED)
 include_directories(${NM_INCLUDE_DIRS})
 
 set(CMAKE_AUTOMOC ON)
diff --git a/src/libqtdbusmock/DBusMock.cpp b/src/libqtdbusmock/DBusMock.cpp
index 75395fd..fe3222d 100644
--- a/src/libqtdbusmock/DBusMock.cpp
+++ b/src/libqtdbusmock/DBusMock.cpp
@@ -19,7 +19,7 @@
 #include <libqtdbusmock/DBusMock.h>
 #include <libqtdbustest/QProcessDBusService.h>
 
-#include <NetworkManager.h>
+#include <nm-dbus-interface.h>
 #include <QFile>
 #include <QJsonDocument>
 #include <QStandardPaths>
diff --git a/tests/libqtdbusmock/TestDBusMock.cpp b/tests/libqtdbusmock/TestDBusMock.cpp
index ea6a09e..fc22d75 100644
--- a/tests/libqtdbusmock/TestDBusMock.cpp
+++ b/tests/libqtdbusmock/TestDBusMock.cpp
@@ -18,7 +18,7 @@
 
 #include <libqtdbusmock/DBusMock.h>
 #include <QCoreApplication>
-#include <NetworkManager.h>
+#include <nm-dbus-interface.h>
 #include <QList>
 #include <QDBusInterface>
 #include <QDBusObjectPath>
-- 
2.21.0

